# Pad 0 to nace codes with three digits
mutate(
nace = ifelse(nchar(nace) == 3, paste0("0", nace), nace),
ec_leakage = 1
)
# Load orbis nace codes
nace <- read_xlsx("data/01_raw/orbis/orbis_NACE_codes.xlsx", sheet = 2, na = "n.a.") |>
select(isin = `ISIN number`, nace = `NACE Rev. 2, core code (4 digits)`) |>
filter(!is.na(isin))
# Merge with df
df <- df |>
left_join(nace, by = "isin") |>
left_join(ec, by = "nace")
### END
table(df$ec_leakage, useNA = "ifany")
# Inspect
firms_leakage <- df |> filter(ec_leakage==1)
View(firms_leakage)
# number of firms
firms_leakage |> distinct(gvkey)
names(df)
## Overall climate lobbying, overall exposure for annual by specific attention component
models <- list(
"(Occurrence)" = feglm(CLI ~ op_expo_ew_y*ec_leakage+ rg_expo_ew_y*ec_leakage + ph_expo_ew_y*ec_leakage + ebit + I(ebit/at) + us_dummy + total_lobby | year +  industry + industry_year, family = "binomial", df),
"(Expenditure)" = feols(log(CLI_dollars + 1) ~ op_expo_ew_y*ec_leakage + rg_expo_ew_y*ec_leakage + ph_expo_ew_y*ec_leakage + ebit + I(ebit/at) + us_dummy + total_lobby | year +  industry + industry_year, df)
)
summary(models)
summary(models)[[1]]
summary(models[1])
models$`(Occurrence)`
summary(models$`(Occurrence)`)
## Overall climate lobbying, overall exposure for annual by specific attention component
models <- list(
"(Occurrence)" = feglm(CLI ~ op_expo_ew_y*ec_leakage+ rg_expo_ew_y*ec_leakage + ph_expo_ew_y*ec_leakage + ebit + I(ebit/at) + us_dummy + total_lobby | year, family = "binomial", df),
"(Expenditure)" = feols(log(CLI_dollars + 1) ~ op_expo_ew_y*ec_leakage + rg_expo_ew_y*ec_leakage + ph_expo_ew_y*ec_leakage + ebit + I(ebit/at) + us_dummy + total_lobby | year, df)
)
summary(models$`(Occurrence)`)
df_reduced <- df |> filter(ec_leakage == 1)
models <- list(
"(Occurrence)" = feglm(CLI ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year, family = "binomial", df_reduced),
"(Expenditure)" = feols(log(CLI_dollars + 1) ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year, df_reduced)
)
summary(models$`(Occurrence)`)
summary(models$`(Expenditure)`)
# Reduce to Industry Group 491: Electric Services
df_red <- df |> filter(ec_leakage == 1)
# names
cm <- c(
"op_expo_ew_y" = "Opportunity Exposure",
"rg_expo_ew_y" = "Regulatory Exposure",
"ph_expo_ew_y" = "Physical Exposure",
"ebit" = "EBIT",
"I(ebit/at)" = "EBIT/Assets",
"log_co2_l1" = "Log(Total CO2 Emissions)",
"us_dummy" = "US HQ",
"total_lobby" = "Total Lobbying ($)"
)
## Overall climate lobbying, overall exposure for annual by specific attention component
models <- list(
"(Occurrence)" = feglm(CLI ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year, family = "binomial", df_red),
"(Expenditure)" = feols(log(CLI_Dollars + 1) ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year, df_red)
)
names(df_red)
## Overall climate lobbying, overall exposure for annual by specific attention component
models <- list(
"(Occurrence)" = feglm(CLI ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year, family = "binomial", df_red),
"(Expenditure)" = feols(log(CLI_dollars + 1) ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year, df_red)
)
modelsummary(
models
,stars = c('*' = .1, '**' = .05, '***' = .01)
#,title = 'Effect of Climate Change Attention on Lobbying on Climate Issues'
,coef_map = cm
,vcov = ~ year + gvkey
,gof_omit = 'AIC|BIC|Log.Lik|Std.Errors|RMSE'
,output = "results/Tables/mobility/ec_leakage.tex"
)
modelsummary(
models
,stars = c('*' = .1, '**' = .05, '***' = .01)
#,title = 'Effect of Climate Change Attention on Lobbying on Climate Issues'
,coef_map = cm
,vcov = ~ year + gvkey
,gof_omit = 'AIC|BIC|Log.Lik|Std.Errors|RMSE'
# ,output = "results/Tables/mobility/ec_leakage.tex"
)
## Overall climate lobbying, overall exposure for annual by specific attention component
models <- list(
"(Occurrence)" = feglm(CLI ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year + industry + industry_year, family = "binomial", df_red),
"(Expenditure)" = feols(log(CLI_dollars + 1) ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year + industry + industry_year, df_red)
)
modelsummary(
models
,stars = c('*' = .1, '**' = .05, '***' = .01)
#,title = 'Effect of Climate Change Attention on Lobbying on Climate Issues'
,coef_map = cm
,vcov = ~ year + gvkey
,gof_omit = 'AIC|BIC|Log.Lik|Std.Errors|RMSE'
# ,output = "results/Tables/mobility/ec_leakage.tex"
)
modelsummary(
models
,stars = c('*' = .1, '**' = .05, '***' = .01)
#,title = 'Effect of Climate Change Attention on Lobbying on Climate Issues'
,coef_map = cm
# ,vcov = ~ year + gvkey
,gof_omit = 'AIC|BIC|Log.Lik|Std.Errors|RMSE'
# ,output = "results/Tables/mobility/ec_leakage.tex"
)
modelsummary(
models
,stars = c('*' = .1, '**' = .05, '***' = .01)
#,title = 'Effect of Climate Change Attention on Lobbying on Climate Issues'
,coef_map = cm
,vcov = ~ year + gvkey
,gof_omit = 'AIC|BIC|Log.Lik|Std.Errors|RMSE'
# ,output = "results/Tables/mobility/ec_leakage.tex"
)
modelsummary(
models
,stars = c('*' = .1, '**' = .05, '***' = .01)
#,title = 'Effect of Climate Change Attention on Lobbying on Climate Issues'
,coef_map = cm
,vcov = ~ year + gvkey
,gof_omit = 'AIC|BIC|Log.Lik|Std.Errors|RMSE'
,output = "results/Tables/mobility/ec_leakage.tex"
)
# Reduce to
df_red_compl <- df |> filter(ec_leakage == 0)
## Overall climate lobbying, overall exposure for annual by specific attention component
models <- list(
"(Occurrence)" = feglm(CLI ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year + industry + industry_year, family = "binomial", df_red_compl),
"(Expenditure)" = feols(log(CLI_dollars + 1) ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year + industry + industry_year, df_red_compl)
)
# Reduce to
df_red_compl <- df |> filter(ec_leakage == 0)
## Overall climate lobbying, overall exposure for annual by specific attention component
models <- list(
"(Occurrence)" = feglm(CLI ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year + industry + industry_year, family = "binomial", df_red_compl),
"(Expenditure)" = feols(log(CLI_dollars + 1) ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year + industry + industry_year, df_red_compl)
)
# Reduce to
df_red_compl <- df |> filter(ec_leakage == 0)
table(df$ec_leakage, useNA = "ifany")
# Reduce to
df_red_compl <- df |> filter(is.na(ec_leakage))
## Overall climate lobbying, overall exposure for annual by specific attention component
models <- list(
"(Occurrence)" = feglm(CLI ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year + industry + industry_year, family = "binomial", df_red_compl),
"(Expenditure)" = feols(log(CLI_dollars + 1) ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + I(ebit/at) + us_dummy + total_lobby | year + industry + industry_year, df_red_compl)
)
modelsummary(
models
,stars = c('*' = .1, '**' = .05, '***' = .01)
#,title = 'Effect of Climate Change Attention on Lobbying on Climate Issues'
,coef_map = cm
,vcov = ~ year + gvkey
,gof_omit = 'AIC|BIC|Log.Lik|Std.Errors|RMSE'
,output = "results/Tables/mobility/not_on_ec_leakage.tex"
)
### Within industry variation in climate change exposure
rm(list=ls())
# load packages
pacman::p_load(data.table, tidyverse)
# set working directory
if(Sys.info()["user"]=="christianbaehr" ) {setwd("/Users/christianbaehr/Dropbox/BBH/BBH1/data/")}
if(Sys.info()["user"]=="vincentheddesheimer" ) {setwd("~/Dropbox (Princeton)/BBH/BBH1/data/")}
# load data
df <- fread("02_processed/exposure_year.csv", colClasses = c("sic"="character"))
df$sic <- as.numeric(substr(df$sic, 1, 2))
# Within industry variation in exposure -----------------------------------
# merge
df <- df |>
# filter out empty bvd_sector
filter(bvd_sector != "") |>
# select variables we need
select(isin, year, bvd_sector, opexpo, rgexpo, phexpo) |>
pivot_longer(cols = opexpo:phexpo, names_to = "Exposure", values_to = "Value") |>
mutate(Exposure = recode(Exposure,
opexpo = "Opportunity",
phexpo = "Physical",
rgexpo = "Regulatory"),
round = round(Value,digits = 2))
# calculate number of firms per industry
industry_n_firms <- df |>
group_by(bvd_sector) |>
count()
# Calculate variance within each industry
industry_var <- df |>
# group by industry
group_by(bvd_sector, Exposure) |>
# get variance for each industry
summarise(Variance = var(Value, na.rm = TRUE)) |>
ungroup() |>
filter(!is.na(bvd_sector)) |>
arrange(desc(Variance))
# Calculate mean variance across exposure variables
industry_var_levels <- industry_var |>
group_by(bvd_sector) |>
summarise(mean = mean(Variance, na.rm = TRUE)) |>
ungroup() |>
filter(!is.na(bvd_sector)) |>
arrange((mean)) |>
tail(15)
# Violin Plot
df |>
filter(bvd_sector %in% industry_var_levels$bvd_sector) |>
mutate(bvd_sector = factor(bvd_sector, levels = industry_var_levels$bvd_sector)) |>
ggplot(aes(y = Value, x = bvd_sector)) +
facet_wrap(vars(Exposure), nrow = 1, scales = "free_x") +
geom_violin(trim = T,
fill = "darkgrey",
scale = "width") +
coord_flip() +
theme_bw() +
labs(y = "Distribution of Exposure Variables", x = "") +
theme_bw() +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
legend.position = "bottom",
text = element_text(size = 12))
ggsave("../results/Figures/descriptives/within_industry_variances_TOP15_violin.pdf", width=10, height=8)
# BoxPlot
df |>
filter(bvd_sector %in% industry_var_levels$bvd_sector) |>
mutate(
bvd_sector=factor(bvd_sector, levels=industry_var_levels$bvd_sector),
bvd_sector = fct_relabel(bvd_sector, ~str_wrap(., width = 40))
) |>
ggplot(aes(y=Value,x=bvd_sector)) +
facet_wrap(vars(Exposure), nrow=1, scales = "free_x") +
geom_boxplot(fill="darkgrey"
,na.rm = TRUE
, outlier.alpha = .075
, varwidth = TRUE
) +
coord_flip() +
theme_bw() +
labs(y = "Distribution of Exposure Variables", x = "") +
theme_bw() +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
legend.position = "bottom",
text = element_text(size = 12))
ggsave("../results/Figures/descriptives/within_industry_variances_TOP15_boxplot.pdf", width=10, height=8)
# # calculate average climate change exposure by firm
# firm_mean <- df |>
#   group_by(isin) |>
#   summarise(ccexp = mean(ccexp, na.rm=T)) |>
#   left_join(df |> select(isin,sic),
#             by = "isin") |>
#   left_join(sic_desc, by = "sic") |>
#   filter(!is.na(industry))
#
# # Calculate variance within each industry
# sic_var <- firm_mean |>
#   # group by industry
#   group_by(industry) |>
#   # get variance for each industry
#   summarise(sic_var=var(ccexp,na.rm=T)) |>
#   # delete all industries with NAs
#   filter(!is.na(industry)) |>
#   # round
#   mutate(sic_var = round(sic_var, digits = 2)) |>
#   arrange(sic_var)
#
# # Only those industries with more than 50 firms
# sic_ct <- firm_mean |>
#   count(sic) #|>
#   filter(n>50)
#
# # plot
# within_industry_variance <- firm_mean |>
#   filter(sic %in% sic_ct$sic) |>
#   mutate(industry=factor(industry, levels=sic_var$industry)) |>
#   ggplot(aes(x=industry, y=ccexp)) +
#   # geom_jitter(alpha=0.1) +
#   geom_boxplot(fill="red", outlier.alpha = .075) +
#   theme_bw() +
#   theme(
#     legend.position="none",
#     plot.title = element_text(size=11)
#   ) +
#   labs(x = "", y = "Climate Change Exposure") +
#   coord_flip()
#
# # save
# ggsave("../results/Figures/descriptives/within_industry_variance.pdf", within_industry_variance, width=11, height=8.5)
#
#
# # Variances over all exposure measures ------------------------------------
#
# # get averages for all four exposure variables for each firm
# firm_means <- df |>
#   group_by(isin) |>
#   summarise(across(c(opexpo,rgexpo,phexpo), ~ mean(.x, na.rm=T))) |>
#   left_join(df |> select(isin,sic),
#             by = "isin") |>
#   left_join(sic_desc, by = "sic") |>
#   filter(!is.na(industry))
#
# # calculate variance for each variable within industries
# exposure_var <- firm_means |>
#   group_by(industry) |>
#   summarise(across(opexpo:phexpo, ~ var(.x, na.rm = TRUE))) |>
#   mutate(avg_var = rowMeans(across(opexpo:phexpo))) |>
#   arrange(-avg_var)
#
# # Only top 15 variance industries
# sic_ct <- exposure_var |>
#   arrange(-avg_var) |>
#   head(15)
#
# # Plot
# firm_means |>
#   filter(industry %in% sic_ct$industry) |>
#   mutate(industry=factor(industry, levels=sic_var$industry)) |>
#   pivot_longer(cols = 2:4, names_to = "Exposure", values_to = "value") |>
#   mutate(Variable = recode(Exposure,
#                            opexpo = "Opportunity",
#                            phexpo = "Physical",
#                            rgexpo = "Regulatory"),
#          round = round(value,digits = 2)) |>
#   ggplot(aes(y=value,x=industry)) +
#   facet_wrap(vars(Variable), nrow=1, scales = "free_x") +
#   # geom_violin() +
#   geom_boxplot(fill="darkgreen", outlier.alpha = .075) +
#   coord_flip() +
#   # viridis::scale_color_viridis(discrete = T,end = .9) +
#   # scale_shape_manual(values=c(15:18)) +
#   theme_bw() +
#   labs(y="Variance",x = "") +
#   theme(legend.position = "bottom",
#         axis.text.x=element_text(angle = 35, vjust=0.95,hjust=1))
#
# # save
# ggsave("../results/Figures/descriptives/within_industry_variances.pdf", within_industry_variances, width=11, height=8.5)
#
# ###
#
# # top 10 only
#
# # Plot
# within_industry_variances <- exposure_var |>
#   filter(industry %in% sic_ct$industry) |>
#   mutate(industry=factor(industry, levels=sic_var$industry)) |>
#   pivot_longer(cols = 2:6, names_to = "Variable", values_to = "value") |>
#   mutate(Variable = recode(Variable,
#                            opexpo = "Opportunity",
#                            phexpo = "Physical",
#                            rgexpo = "Regulatory"),
#          round = round(value,digits = 2)) |>
#   filter(!Variable %in% c("avg_var", "ccexp")) |>
#   group_by(industry) |>
#   mutate(sumv=sum(value)) |>
#   ungroup() |>
#   arrange(desc(sumv)) |>
#   head(30) |>
#   ggplot(aes(y=value,x=industry)) +
#   facet_wrap(vars(Variable), nrow=1, scales = "free_x") +
#   geom_point(size=3) +
#   coord_flip() +
#   viridis::scale_color_viridis(discrete = T,end = .9) +
#   scale_shape_manual(values=c(15:18)) +
#   theme_bw() +
#   labs(y="Variance",x = "") +
#   theme(legend.position = "bottom",
#         axis.text.x=element_text(angle = 35, vjust=0.95,hjust=1))
#
# ggsave("../results/Figures/descriptives/within_industry_variances_TOP10.pdf", within_industry_variances, width=11, height=8.5)
# End
rm(list=ls())
# load packages
pacman::p_load(data.table, tidyverse, haschaR, broom, fixest, readxl, kableExtra)
# prevent scientific notation
options(scipen = 999)
# set working directory
if(Sys.info()["user"]=="christianbaehr" ) {setwd("/Users/christianbaehr/Dropbox/BBH/BBH1/")}
if(Sys.info()["user"]=="vincentheddesheimer" ) {setwd("~/Dropbox (Princeton)/BBH/BBH1/")}
if(Sys.info()["user"]=="fiona" ) {setwd("/Users/Dropbox (Princeton)/BBH/BBH1/")}
# ###Placebo exploration
# #load dataset
# df <- fread("data/00_old/data/03_final/lobbying_df_wide_reduced_normal.csv")
#
# # read in lobbying issue codes
# codes <- read_excel("data/01_raw/lobbyview/lobbying_issue_codes.xlsx")
#
# # merge df with codes
# df <- df %>%
#   left_join(codes, by = c("issue_code" = "Code")) %>%
#   rename(issue_code_txt = Description)
#
#
# # Plot number of reports by issue code txt
# df %>%
#   group_by(issue_code_txt) %>%
#   summarise(n = n()) %>%
#   arrange(desc(n)) %>%
#   filter(n > 100) %>%
#   # Highlight Energy/Nuclear, Environmental/Superfund, Clean Air & Water (Quality), Fuel/Gas/Oil
#   mutate(climate = ifelse(issue_code_txt %in% c("Energy/Nuclear", "Environmental/Superfund", "Clean Air & Water (Quality)", "Fuel/Gas/Oil"), 1, 0)) %>%
#   # Highlight climate == 1 in red
#   ggplot(aes(x = reorder(issue_code_txt, n), y = n, fill = factor(climate))) +
#   geom_col() +
#   coord_flip() +
#   labs(x = "Issue Code", y = "Number of Reports", title = "Number of Reports by Issue Code (1999-2020)") +
#   theme_hanno()+
#   scale_fill_manual(values = c("grey", "red")) +
#   theme(legend.position = "none")
#
# # Save plot
# ggsave("results/Figures/descriptives/number_of_reports_by_issue_code.pdf", width = 9, height = 13)
#
#
# # Plot mean lobbying expenditure by issue code txt (in billions)
# df %>%
#   group_by(issue_code_txt) %>%
#   summarise(total_expenditure = sum(amount_num)) %>%
#   # divide by 1000000 to get in millions
#   mutate(total_expenditure = total_expenditure / 1000000) %>%
#   arrange(desc(total_expenditure)) %>%
#   filter(total_expenditure > 1000) %>%
#   # Highlight Energy/Nuclear, Environmental/Superfund, Clean Air & Water (Quality), Fuel/Gas/Oil
#   mutate(climate = ifelse(issue_code_txt %in% c("Energy/Nuclear", "Environmental/Superfund", "Clean Air & Water (Quality)", "Fuel/Gas/Oil"), 1, 0)) %>%
#   # Highlight climate == 1 in red
#   ggplot(aes(x = reorder(issue_code_txt, total_expenditure), y = total_expenditure, fill = factor(climate))) +
#   geom_col() +
#   coord_flip() +
#   # label x axis correctly
#   labs(x = "Issue Code", y = "Total Expenditure (billions)", title = "Total Expenditure by Issue Code (1999-2020)") +
#   theme_hanno()+
#   scale_fill_manual(values = c("grey", "red")) +
#   theme(legend.position = "none")
#
#
# # Save plot
# ggsave("results/Figures/descriptives/expenditure_by_issue_code.pdf", width = 9, height = 13)
#Load dataset
df <- fread("data/03_final/lobbying_df_wide_reduced_normal.csv")
#Create new variable that is ebit/assets and normalize
df <- df |> mutate(
ebit_at = scale(ebit / at)
)
# Specify covariate names
cm <- c("op_expo_ew_y" = "Opportunity Exposure",
"rg_expo_ew_y" = "Regulatory Exposure",
"ph_expo_ew_y" = "Physical Exposure",
"cc_expo_ew_y" = "Overall Exposure",
"ebit" = "EBIT",
"ebit_at" = "EBIT/Assets",
"us_dummy" = "US HQ",
"total_lobby" = "Total Lobbying ($)"
)
#Run model for first issue code (agriculture) - this works
# ag <- feglm(AGR ~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + ebit_at + us_dummy + total_lobby| year + industry + industry_year, family = "binomial", df)
# Occurrence --------------------------------------------------------------
##Identify placebo variables
# Specify columns to remove
columns_to_remove <- c("CAW", "ENV", "ENG", "FUE", "REL") # climate issues + REL constant zero (no lobbying)
# Remove specified columns
df_placebo <- df |>
select(-all_of(columns_to_remove)) |>
# all to numeric
mutate_at(vars(AGR:FAM), as.numeric)
start_index <- which(names(df_placebo) == "AGR")
end_index <- which(names(df_placebo) == "FAM")
# Extract column names between "AGR" and "REL" into a character vector
dependent_vars <- names(df_placebo)[start_index:end_index]
# View the character vector of column names
print(dependent_vars)
# Initialize an empty list to store model results
results_list <- list()
# Iterate over the dependent variables and fit the feglm model with fixed effects for each
for (dv in dependent_vars) { {
formula <- as.formula(paste(dv, "~ op_expo_ew_y + rg_expo_ew_y + ph_expo_ew_y + ebit + ebit_at + us_dummy + total_lobby| year + industry + industry_year")) # Include fixed effects in the formula
# Debugging
print(formula)
# Fit the feglm model
model <- feglm(formula, family = "binomial", data = df_placebo)
# Store the model results in the list
results_list[[paste(dv, sep = "_")]] <- summary(model)
}
}
# Create an empty dataframe to store tidied results
tidied_results <- data.frame()
# Iterate over the results_list to tidy each model's results
for (dv in names(results_list)) {
# Extract 95% confidence intervals
tidied_model_95 <- tidy(results_list[[dv]], conf.int = TRUE, conf.level = 0.95) %>%
filter(term %in% c("op_expo_ew_y", "rg_expo_ew_y", "ph_expo_ew_y")) %>%
mutate(dependent_var = dv) %>%
rename(conf.low95 = conf.low, conf.high95 = conf.high)
# Extract 90% confidence intervals
tidied_model_90 <- tidy(results_list[[dv]], conf.int = TRUE, conf.level = 0.90) %>%
filter(term %in% c("op_expo_ew_y", "rg_expo_ew_y", "ph_expo_ew_y")) %>%
mutate(dependent_var = dv) %>%
select(-c(statistic, p.value, std.error, estimate)) %>%
rename(conf.low90 = conf.low, conf.high90 = conf.high)
# Join the 95% and 90% results by dependent_var and term
tidied_model <- left_join(tidied_model_95, tidied_model_90, by = c("dependent_var", "term"))
# Add number of observations to the tidied results
nobs <- nobs(results_list[[dv]])
tidied_model$nobs <- nobs
tidied_results <- bind_rows(tidied_results, tidied_model)
}
rm(list=ls())
# load packages
pacman::p_load(data.table, tidyverse, countrycode, readxl)
# set working directory
if(Sys.info()["user"]=="fiona"){setwd("C:/Users/fiona/Dropbox (Princeton)/BBH/BBH1/data")}
if(Sys.info()["user"]=="christianbaehr" ) {setwd("/Users/christianbaehr/Dropbox/BBH/BBH1/data/")}
if(Sys.info()["user"]=="vincentheddesheimer" ) {setwd("~/Dropbox (Princeton)/BBH/BBH1/data/")}
