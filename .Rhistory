library(haven)
policies <- read_dta("~/Dropbox (Princeton)/BBH/BBH1/data/Kang (2016) replication/Datafortheweb/IntermediateDatasets/Policies/policylist.dta")
View(policies)
bills <- read_dta("~/Dropbox (Princeton)/BBH/BBH1/data/Kang (2016) replication/Datafortheweb/IntermediateDatasets/Policies/billseclist.dta")
View(bills)
lobbying <- read_dta("~/Dropbox (Princeton)/BBH/BBH1/data/Kang (2016) replication/Datafortheweb/IntermediateDatasets/Lobbying/lobbyingbills_cleaned.dta")
View(lobbying)
entity <- read_dta("~/Dropbox (Princeton)/BBH/BBH1/data/Kang (2016) replication/Datafortheweb/IntermediateDatasets/Lobbying/sdata110th_client.dta")
View(entity)
library(haven)
policies <- read_dta("~/Dropbox (Princeton)/BBH/BBH1/data/Kang (2016) replication/Datafortheweb/IntermediateDatasets/Policies/policylist.dta")
bills <- read_dta("~/Dropbox (Princeton)/BBH/BBH1/data/Kang (2016) replication/Datafortheweb/IntermediateDatasets/Policies/billseclist.dta")
lobbying <- read_dta("~/Dropbox (Princeton)/BBH/BBH1/data/Kang (2016) replication/Datafortheweb/IntermediateDatasets/Lobbying/lobbyingbills_cleaned.dta")
entity <- read_dta("~/Dropbox (Princeton)/BBH/BBH1/data/Kang (2016) replication/Datafortheweb/IntermediateDatasets/Lobbying/sdata110th_client.dta")
View(policies)
rm(list=ls())
# load packages
library(data.table)
library(tidyverse)
library(countrycode)
library(readxl)
# set working directory
setwd("C:/Users/fiona/Dropbox (Princeton)/BBH/BBH1/data")
### Climate change exposure
#import quarterly data
ccexposure_q <- fread("CC Exposure/cc_firmquarter_2021Q4_03082021_OSF (1).csv")
if(Sys.info()["user"]=="vincentheddesheimer" ) {setwd("~/Dropbox (Princeton)/BBH/BBH1/data/")}
### Climate change exposure
#import quarterly data
ccexposure_q <- fread("CC Exposure/cc_firmquarter_2021Q4_03082021_OSF (1).csv")
View(ccexposure_q)
names(ccexposure_q)
#import yearly data
ccexposure_y <- fread("CC Exposure/cc_firmyear_2021Q4_03082021_OSF (1).csv")
modelsummary::datasummary(ccexposure_y)
modelsummary::datasummary(ccexposure_y)
modelsummary::datasummary_skim(ccexposure_y)
rm(list=ls())
# load packages
library(data.table)
library(tidyverse)
# set working directory
if(Sys.info()["user"]=="christianbaehr" ) {setwd("/Users/christianbaehr/Dropbox/BBH/BBH1/data/")}
if(Sys.info()["user"]=="vincentheddesheimer" ) {setwd("~/Dropbox (Princeton)/BBH/BBH1/data/")}
# load data
df <- fread("indepvar_year.csv", colClasses = c("sic"="character"))
### Firms & Climate Lobbying
### Search for Placebo
rm(list=ls())
# load packages
pacman::p_load(data.table, tidyverse, janitor, readxl)
# set working directory
if(Sys.info()["user"]=="christianbaehr" ) {setwd("/Users/christianbaehr/Dropbox/BBH/BBH1/")}
if(Sys.info()["user"]=="vincentheddesheimer" ) {setwd("~/Dropbox (Princeton)/BBH/BBH1/")}
df <- fread("data/lobbying_df_w_directionality.csv") |>
mutate(
year_quarter = paste0(year, "_", report_quarter_code),
amount_num = as.numeric(amount_num)
)
# read in lobbying issue codes
codes <- read_excel("data/LOBBYING LobbyView/lobbying_issue_codes.xlsx")
# merge df with codes
df <- df %>%
left_join(codes, by = c("issue_code" = "Code")) %>%
rename(issue_code_txt = Description)
# Plot number of reports by issue code txt
df %>%
group_by(issue_code_txt) %>%
summarise(n = n()) %>%
arrange(desc(n)) %>%
filter(n > 100) %>%
ggplot(aes(x = reorder(issue_code_txt, n), y = n)) +
geom_col() +
coord_flip() +
labs(x = "Issue Code", y = "Number of Reports", title = "Number of Reports by Issue Code") +
theme_bw()
# Plot lobbying expenditure by issue code txt
df %>%
group_by(issue_code_txt) %>%
summarise(total_expenditure = sum(amount_num)) %>%
arrange(desc(total_expenditure)) %>%
filter(total_expenditure > 1000000) %>%
ggplot(aes(x = reorder(issue_code_txt, total_expenditure), y = total_expenditure)) +
geom_col() +
coord_flip() +
labs(x = "Issue Code", y = "Total Expenditure", title = "Total Expenditure by Issue Code") +
theme_bw()
